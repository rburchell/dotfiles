#!/bin/sh
if ! [ -z "$1" ]; then
    if ! [ -f "$1" ]; then
        echo "$0: file does not exist"
        return 1
    fi
    ext=`echo $1 | awk -F . '{ print $NF } '`
    rand=$(randstr)
    scp "$1" "zoe:/var/www/qtl.me/www/$rand.$ext"
    echo "pasted http://qtl.me/$rand.$ext"
else
    # TODO: OS X specific
    if [ "$PLATFORM" != "osx" ]; then
        echo "$0: clipboard access does not work on anything except OS X right now"
        return 1
    fi

    data="$(pbpaste)"
    rand=$(randstr)
    echo "$data" > "/tmp/$rand.txt"
    scp "/tmp/$rand.txt" "zoe:/var/www/qtl.me/www/$rand.txt"
    echo "pasted http://qtl.me/$rand.txt"
    echo "http://qtl.me/$rand.txt" | pbcopy
fi

